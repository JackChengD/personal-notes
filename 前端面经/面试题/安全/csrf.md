# csrf（跨站请求伪造）

- 伪造用户发起恶意伪造的请求，严重影响网站的安全。
- 一般情况是，它利用用户已登录的身份，在用户毫不知情下，以用户的身份发起请求。

完成csrf必须要有3个条件：

1. 用户已经登录站点a，并在本地记录cookie
2. 在用户没有登出的情况下（也就是在cookie生效期间），访问了恶意攻击者提供的引导危险站点b（站点b要求访问站点a）
3. 站点a没有做csrf的防范

## 防范

- get请求不对数据进行修改
- 不让第三方网站访问用户cookie
- 组织第三方网站请求接口
- 请求时附带验证信息，比如验证码或者token

1. cookie设置sameSite，表示cookie不随着跨域请求发送
2. 检验http包头referer的值是不是这个页面，来判断是不是csrf攻击
3. 检验token
4. 对付一些敏感的操作，比如转账，可以增加二维码校验，虽然降低用户的体验，但是提升给用户提升了安全。
