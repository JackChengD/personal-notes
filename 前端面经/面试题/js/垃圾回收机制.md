# 垃圾回收机制

## 标记清除  

当变量进入环境（例如：在函数中定义一个变量）时，就将这个变量标记为“进入环境”。从逻辑上讲，永远不能释放进入环境的变量所占用的内存，因为只要执行流进入相应的环境，就可能会用到他们，而当变量离开时，则将其标记为“离开环境”。  
标记清除在运行的时候会给存储在内存中的所有变量都加上标记。然后，他会去掉环境中的变量以及被环境中的变量引用的变量的标记（环境中的变量以及被环境中的变量引用的变量是没有标记的）。而在此之后再被加上标记的变量将被视为准备删除的变量，原因是环境中的变量已经无法访问到这些变量了。最后，垃圾收集器完成内存清除工作，销毁那些带标记的值并回收他们所占用的内存空间。

## 引用计数

引用计数的含义是跟踪记录每个值被引用的次数。当声明了一个变量并将一个引用类型值赋给该变量时，则这个值的引用次数就是1.如果同一个值又被赋给另一个变量，则该值的引用次数加1。相反，如果包含对这个值引用的变量又取得了另外一个值，则这个值的引用次数减1.当这个值的引用次数为0时，则说明没有方法再访问这个值了，因而就可以将其占用的内存空间回收回来。这样，当垃圾收集器下次再运行时，他就会释放那些引用次数为0的值所在的内存  
